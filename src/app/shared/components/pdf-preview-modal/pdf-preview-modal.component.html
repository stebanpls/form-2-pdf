<div class="preview-overlay" (click)="close.emit()">
  <div
    class="preview-container"
    (click)="onContainerClick($event)"
    [class.fullscreen]="isFullscreen()"
  >
    <div class="preview-header">
      <h3>{{ title }}</h3>
      <div class="preview-header-actions">
        <button class="btn btn-primary btn-icon-text" (click)="download.emit()" title="Descargar">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
          </svg>
          <span>Descargar</span>
        </button>
        <button class="btn btn-secondary btn-icon-text" (click)="onPrint()" title="Imprimir">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM16 18H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM18 3H6v4h12V3z"
            />
          </svg>
          <span>Imprimir</span>
        </button>
        <button
          class="btn btn-secondary btn-icon"
          (click)="toggleFullscreen()"
          [title]="isFullscreen() ? 'Salir de pantalla completa' : 'Pantalla completa'"
        >
          @if (isFullscreen()) {
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"
            />
          </svg>
          } @else {
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"
            />
          </svg>
          }
        </button>
        <!-- Se cambian las clases para que el botón de cerrar se vea como los demás (sin fondo rojo) -->
        <button
          class="btn btn-secondary btn-icon close-button"
          (click)="close.emit()"
          title="Cerrar"
        >
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
            />
          </svg>
        </button>
      </div>
    </div>
    <div class="iframe-frame">
      <iframe #pdfIframe [src]="url" title="Vista previa del PDF"></iframe>
    </div>
  </div>
</div>
